{
    "broker": {
        "name": "RPi Local Broker",
        "host": "192.168.1.81",
        "port": 1884,
        "clientId": "gateway",
        "maxMessageNumberPerWorker": 10,
        "maxNumberOfWorkers": 100,
        "security": {
            "type": "basic",
            "username": "rpi",
            "password": "hydroponika"
        }
    },
    "mapping": [
        {
            "topicFilter": "/sensor/data",
            "converter": {
                "type": "json",
                "deviceNameJsonExpression": "${serialNumber}",
                "deviceTypeJsonExpression": "${sensorType}",
                "timeout": 60000,
                "attributes": [
                    {
                        "type": "string",
                        "key": "model",
                        "value": "${sensorModel}"
                    },
                    {
                        "type": "string",
                        "key": "${sensorModel}",
                        "value": "on"
                    }
                ],
                "timeseries": [
                    {
                        "type": "double",
                        "key": "temperature",
                        "value": "${temp}"
                    },
                    {
                        "type": "double",
                        "key": "humidity",
                        "value": "${hum}"
                    },
                    {
                        "type": "int",
                        "key": "led_state",
                        "value": "${led}"
                    },
                    {
                        "type": "bool",
                        "key": "fan_state",
                        "value": "${fan}"
                    },
                    {
                        "type": "bool",
                        "key": "waterlvl_state",
                        "value": "${waterlvl}"
                    },
                    {
                        "type": "int",
                        "key": "pump_speed",
                        "value": "${pump_pwm}"
                    }
                ]
            }
        }
    ],
    "connectRequests": [
        {
            "topicFilter": "/sensor/connect",
            "deviceNameJsonExpression": "${serialNumber}"
        }
    ],
   
    "serverSideRpc": [
        {
            "deviceNameFilter": "SN.*",
            "methodFilter": "echo",
            "requestTopicExpression": "/sensor/${deviceName}/request/${methodName}/${requestId}",
            "responseTopicExpression": "/sensor/${deviceName}/response/${methodName}/${requestId}",
            "responseTimeout": 10000,
            "valueExpression": "${params}"
        },
        {
            "deviceNameFilter": ".*",
            "methodFilter": "no-reply",
            "requestTopicExpression": "/sensor/${deviceName}/request/${methodName}/${requestId}",
            "valueExpression": "${params.hum}::${params.temp}"
        }
    ]
}